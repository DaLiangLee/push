<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>demo</title>
</head>

<body>


  <script src="http://127.0.0.1:21314/socket.io/socket.io.js"></script>
  <script>
    try {
      // var uuid = window.parseInt(Math.random() * 1000000);
      // var uuid = Math.random() * 10000;
      var uuid = 'uui333';
      var userid = 'user11';
      var socket = io.connect('http://127.0.0.1:21314/demo?uuid=' + uuid + '&userid=' + userid);
    } catch (e) {
      alert('error:' + e);
    }
    socket.on('connect', function () {
      var rooms = ['room555'];

      socket.emit('joinRoom', rooms, function (result) {
        console.log('joinRoom:' + JSON.stringify(result));
      });

      socket.emit('info', null, function (data) {
        console.log('info' + JSON.stringify(data));
      });

      socket.emit('report-push', { id: 26 }, function (result) {
        console.log('report-push:' + JSON.stringify(result));
      })


      socket.on('push', function (data) {
        console.log('push:' + JSON.stringify(data));
        socket.emit('ackPush', { id: data.id });
      });

      socket.on('ok', function (data) {
        console.log('ok: ' + JSON.stringify(data));
      })

      socket.on('joinRoom', function (data) {
        alert('joinRoom:' + data);
      });

      socket.on('leaveRoom', function (data) {
        alert('leaveRoom:' + data);
      });

      socket.on('peopleJoin', function (data) {
        alert('peopleJoin:' + data);
      });

      socket.on('peopleLeave', function (data) {
        alert('peopleLeave:' + data);
      });

      socket.on('offlineMessage', function (msgList) {
        console.log('offlineMessage: ' + JSON.stringify(msgList));
      });


    });
  </script>
</body>

</html>